"use strict";(self.webpackChunktest_task=self.webpackChunktest_task||[]).push([[765],{88:(e,s,t)=>{t.d(s,{A:()=>c});t(43);var r=t(475),o=t(579);const c=e=>{let{to:s,className:t,activeClassName:c,children:n}=e;return(0,o.jsx)(r.k2,{to:s,className:e=>{let{isActive:s}=e;return`${t||"p-4 m-2 bg-slate-400 rounded"} ${s?c:"text-white hover:text-black"}`},children:n})}},765:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var r=t(43),o=t(88),c=t(579);const n=e=>{let{transactions:s}=e;return(0,c.jsxs)("table",{className:"min-w-full",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"w-full bg-gray-100 border-b border-gray-200",children:[(0,c.jsx)("th",{className:"border-2 border-black text-center",children:"From"}),(0,c.jsx)("th",{className:"border-2 border-black text-center",children:"To"}),(0,c.jsx)("th",{className:"border-2 border-black text-center",children:"Sum"})]})}),(0,c.jsx)("tbody",{children:s.map(((e,s)=>(0,c.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,c.jsx)("td",{className:"border-2 border-black text-center",children:e.from}),(0,c.jsx)("td",{className:"border-2 border-black text-center",children:e.to}),(0,c.jsx)("td",{className:"border-2 border-black text-center",children:e.sum.toFixed(8)})]},s)))})]})},l=e=>{let{onClick:s,isDisabled:t,label:r,color:o}=e;return(0,c.jsx)("button",{onClick:s,className:"px-4 py-2 text-white "+(t?"bg-gray-600":`${o||"bg-blue-400"}`),disabled:t,children:r})},a=()=>{const{transactions:e,totalSum:s,connection:t,subscribe:a,unsubscribe:d,clearData:i}=(()=>{const[e,s]=(0,r.useState)(null),[t,o]=(0,r.useState)([]),[c,n]=(0,r.useState)(0),[l,a]=(0,r.useState)(!1),d=(0,r.useCallback)((()=>{const e=new WebSocket("wss://ws.blockchain.info/inv");e.onopen=()=>{console.log("WebSocket connection opened"),a(!0)},e.onmessage=e=>{const s=JSON.parse(e.data);if(s){const e=s.x.inputs.flatMap((e=>s.x.out.map((s=>({from:e.prev_out.addr||"N/A",to:s.addr||"N/A",sum:s.value/1e8})))));o((s=>{const t=[...e,...s],r=t.reduce(((e,s)=>e+s.sum),0);return n(r),t}))}else console.warn("Invalid data received:",s)},e.onerror=e=>{console.error("WebSocket error:",e)},e.onclose=()=>{console.log("WebSocket connection closed."),a(!1)},s(e)}),[]);return(0,r.useEffect)((()=>(d(),()=>{e&&e.close()})),[d]),{transactions:t,totalSum:c,connection:l,subscribe:()=>{e&&e.readyState===WebSocket.OPEN?(e.send(JSON.stringify({op:"unconfirmed_sub"})),console.log("Subscribed to unconfirmed transactions")):console.log("WebSocket is not open or already subscribed")},unsubscribe:()=>{e&&e.readyState===WebSocket.OPEN?(e.send(JSON.stringify({op:"unconfirmed_unsub"})),console.log("Unsubscribed from unconfirmed transactions")):console.log("WebSocket is not open or not subscribed")},clearData:()=>{o([]),n(0)}}})();return(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)(o.A,{to:"/",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044c \u043d\u0430 \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u044e \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443"}),(0,c.jsxs)("div",{className:"flex justify-around mt-6",children:[(0,c.jsx)(l,{onClick:a,isDisabled:!t,label:"\u0417\u0430\u043f\u0443\u0441\u043a",color:"bg-green-600"}),(0,c.jsx)(l,{onClick:d,isDisabled:!t,label:"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430",color:"bg-red-600"}),(0,c.jsx)(l,{onClick:i,isDisabled:!t,label:"\u0421\u0431\u0440\u043e\u0441",color:"bg-yellow-500"})]}),(0,c.jsxs)("div",{className:"text-xl font-bold text-center my-4",children:["\u0421\u0443\u043c\u043c\u0430: ",s.toFixed(8)," BTC"]}),(0,c.jsx)(n,{transactions:e})]})}}}]);
//# sourceMappingURL=765.2904beeb.chunk.js.map